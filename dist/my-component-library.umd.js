(function(p,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(p=typeof globalThis<"u"?globalThis:p||self,e(p.myComponentLib={},p.vue))})(this,function(p,e){"use strict";const F="/nicevideo/kaishi.png",P={class:"progress"},R={class:"progressHead"},H=e.defineComponent({__name:"Progress",props:{total:{},current:{}},emits:["jumpTo"],setup(s,{emit:h}){const i=s,m=h,d=e.ref(),g=e.ref(!1),N=e.ref();e.ref("");function o(a){a.offsetX,g.value=!0}function c(a){g.value=!1}function r(a){const u=a.offsetX,f=N.value.clientWidth;console.log(u/f,u/f*i.total),m("jumpTo",u/f*i.total)}return(a,u)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"progress",ref:N,onMouseleave:c,onMouseenter:o,onClick:r,class:"progress-container"},[e.createElementVNode("div",P,[e.createElementVNode("div",{ref_key:"progressline",ref:d,class:"progressline",style:e.normalizeStyle({width:a.current/a.total*100+"%"})},null,4),e.withDirectives(e.createElementVNode("div",R,null,512),[[e.vShow,g.value]])])],544))}}),he="",x=(s,h)=>{const i=s.__vccOpts||s;for(const[m,d]of h)i[m]=d;return i},j=x(H,[["__scopeId","data-v-87fc5601"]]),E=s=>(e.pushScopeId("data-v-bde65ef7"),s=s(),e.popScopeId(),s),q=["poster","src"],O=["src"],Q={class:"videoControlComponentArea"},A={class:"control-side"},X={key:0,t:"1715781479214",class:"video-control-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4459",width:"200",height:"200"},W=[E(()=>e.createElementVNode("path",{d:"M161.2 839.9v-654c0-56.1 60.7-91.1 109.3-63.1l566.3 327c48.6 28 48.6 98.1 0 126.2L270.4 903c-48.5 28-109.2-7.1-109.2-63.1z",fill:"#cdcdcd","p-id":"4460"},null,-1))],G={key:1,t:"1715781525064",class:"video-control-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5548",width:"200",height:"200"},J=[E(()=>e.createElementVNode("path",{d:"M128 106.858667C128 94.976 137.621333 85.333333 149.12 85.333333h85.76c11.648 0 21.12 9.6 21.12 21.525334V917.12c0 11.882667-9.621333 21.525333-21.12 21.525333H149.12A21.290667 21.290667 0 0 1 128 917.141333V106.88z m640 0c0-11.882667 9.621333-21.525333 21.12-21.525334h85.76c11.648 0 21.12 9.6 21.12 21.525334V917.12c0 11.882667-9.621333 21.525333-21.12 21.525333h-85.76a21.290667 21.290667 0 0 1-21.12-21.525333V106.88z",fill:"#bfbfbf","p-id":"5549"},null,-1))],K={class:"control-side"},U={style:{"margin-right":"20px",position:"relative"}},Y=["onClick"],Z={style:{"margin-right":"20px",position:"relative"}},ee=["onClick"],te=[E(()=>e.createElementVNode("svg",{t:"1715780085335",class:"video-control-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3087",width:"200",height:"200"},[e.createElementVNode("path",{d:"M460.8 940.8h-320l262.4-262.4c12.8-12.8 12.8-38.4 0-51.2-12.8-19.2-38.4-19.2-57.6 0l-262.4 262.4v-345.6c0-19.2-19.2-38.4-38.4-38.4s-38.4 19.2-38.4 38.4v364.8c0 51.2 38.4 115.2 96 115.2h358.4c19.2 0 38.4-19.2 38.4-38.4 0-25.6-19.2-44.8-38.4-44.8zM940.8 6.4h-377.6c-19.2 0-38.4 19.2-38.4 38.4s19.2 38.4 38.4 38.4h320l-268.8 262.4c-12.8 12.8-12.8 38.4 0 57.6 19.2 12.8 44.8 12.8 57.6 0l262.4-262.4v320c0 19.2 19.2 38.4 38.4 38.4s38.4-19.2 38.4-38.4v-352c6.4-64-25.6-102.4-70.4-102.4z",fill:"#cdcdcd","p-id":"3088"})],-1))],oe=[E(()=>e.createElementVNode("img",{src:F,style:{height:"100%",width:"100%"},alt:""},null,-1))],le=[E(()=>e.createElementVNode("svg",{t:"1715774477506",class:"loading-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1573",width:"50%",height:"50%"},[e.createElementVNode("path",{d:"M510.5 958.7c-60.4 0-119-11.8-174.2-35.2-53.3-22.5-101.1-54.8-142.2-95.9s-73.3-88.9-95.9-142.2C74.9 630.2 63 571.6 63 511.2s11.8-119 35.2-174.2c22.5-53.3 54.8-101.1 95.9-142.2S283 121.5 336.3 99c55.2-23.3 113.8-35.2 174.2-35.2 49.3 0 97.8 8 144.1 23.7 26.1 8.9 40.1 37.3 31.2 63.4-7.1 20.8-26.5 33.9-47.3 33.9-5.3 0-10.8-0.9-16.1-2.7-35.9-12.2-73.6-18.4-111.9-18.4-92.8 0-180 36.1-245.7 101.8C199.2 331.1 163 418.4 163 511.2c0 92.8 36.1 180 101.8 245.7 65.6 65.6 152.9 101.8 245.7 101.8s180-36.1 245.7-101.8C821.8 691.3 858 604 858 511.2c0-58.6-14.9-116.6-43-167.6-13.3-24.2-4.6-54.6 19.6-67.9 24.2-13.3 54.6-4.6 67.9 19.6 36.3 65.7 55.4 140.4 55.4 215.9 0 60.4-11.8 119-35.2 174.2-22.5 53.3-54.8 101.1-95.9 142.2-41.1 41.1-88.9 73.3-142.2 95.9-55.1 23.3-113.7 35.2-174.1 35.2z","p-id":"1574",fill:"#cdcdcd"})],-1))],ne="/api/heigh",se=e.defineComponent({__name:"index",props:{height:{type:Number,default:540},width:{type:Number,default:960},poster:{type:String,required:!0},source:{type:Array,required:!0},traker:{type:Array,requierd:!0}},setup(s){e.useCssVars(t=>({"3533d944":h.height+"px","5fd3676f":h.width+"px"}));const h=s,i=e.ref([{rate:2,using:!1},{rate:1.75,using:!1},{rate:1.5,using:!1},{rate:1,using:!0},{rate:.75,using:!1},{rate:.5,using:!1}]);let m=3;const d=e.ref([{title:"4K",src:"/api/heigh",using:!0},{title:"1080",src:"/api/low",using:!1}]);let g=1;const N=e.ref(ne),o=e.ref(),c=e.ref(),r=e.ref(),a=e.ref(),u=e.ref(0),_=e.ref(0),f=e.ref(!1),v=e.ref(!0);e.ref(0);const T=e.ref(!1),B=e.ref(!1);let V=-1;function ae(){V!=-1&&(clearTimeout(V),V=-1)}function M(){V=setTimeout(()=>{B.value=!1,V=-1},1e3)}function ie(t){var l,n;d.value[t].using=!0,d.value[g].using=!1,g=t,o.value.src=d.value[t].src,console.log((l=o.value)==null?void 0:l.src),o.value.currentTime=_.value,(n=o.value)==null||n.play()}function ce(t){T.value=!1,i.value[t].using=!0,i.value[m].using=!1,m=t,o.value.playbackRate=i.value[t].rate}let C=-1;function de(){C!=-1&&(clearTimeout(C),C=-1)}function L(){C=setTimeout(()=>{T.value=!1,C=-1},1e3)}function ue(t){var l;_.value=t,o.value.currentTime=t,(l=o.value)!=null&&l.paused&&(o.value.play(),v.value=!1,I())}let b=[],y=-1;function fe(){console.log("finished"),v.value=!0}function I(){y==-1&&(y=setInterval(()=>{var t,l,n,w;u.value=Math.floor((t=o.value)==null?void 0:t.duration),_.value=Math.floor((l=o.value)==null?void 0:l.currentTime),((n=o.value)==null?void 0:n.currentTime)==((w=o.value)==null?void 0:w.duration)&&(fe(),clearInterval(y),y=-1)},1e3))}function S(){I(),b.push(setTimeout(()=>{o.value.paused?(o.value.play(),v.value=!1):(clearInterval(y),y=-1,o.value.pause(),v.value=!0,f.value=!1)},340))}let k=-1,z;function pe(t){t.target!=z&&(clearTimeout(k),k=-1),z=t.target,r.value.style.opacity="70%",a.value.style.opacity="70%",r.value.style.opacity=="0.7"&&k==-1&&(k=setTimeout(()=>{var l;(l=r.value)!=null&&l.contains(t.target)?(r.value.style.opacity="70%",a.value.style.opacity="70%",k=-1):(r.value.style.opacity="0%",a.value.style.opacity="0%",k=-1)},2500))}function D(){return document.fullscreenElement!=null}function $(){for(let t=0;t<b.length;t++)clearTimeout(b.pop());D()?document.exitFullscreen():c.value.requestFullscreen()}return e.onMounted(()=>{var t,l,n;o.value.playbackRate=2,u.value=(t=o.value)==null?void 0:t.duration,console.log((l=o.value)==null?void 0:l.duration),v.value=o.value.paused,c.value.addEventListener("fullscreenchange",()=>{D()?(c.value.classList.remove("video-container-normal-screen"),c.value.classList.add("video-container-full-screen"),r.value.classList.remove("video-controls-normal-screen"),r.value.classList.add("video-controls-full-screen")):(c.value.classList.remove("video-container-full-screen"),c.value.classList.add("video-container-normal-screen"),r.value.classList.remove("video-controls-full-screen"),r.value.classList.add("video-controls-normal-screen"))}),o.value.addEventListener("playing",()=>{console.log("Video is no longer paused"),f.value=!1}),o.value.addEventListener("seeked",()=>{console.log("Video is seeked"),f.value=!1}),(n=o.value)==null||n.addEventListener("waiting",()=>{console.log("waitting"),f.value=!0}),c.value.addEventListener("mouseenter",()=>{r.value.style.opacity="0.7",a.value.style.opacity="0.7"}),c.value.addEventListener("mouseleave",()=>{})}),(t,l)=>(e.openBlock(),e.createElementBlock("div",{onMousemove:pe,onDblclick:$,ref_key:"videoContainer",ref:c,class:"video-container video-container-normal-screen"},[e.createElementVNode("video",{onClick:S,ref_key:"vdo",ref:o,poster:s.poster,src:N.value},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.traker,n=>(e.openBlock(),e.createElementBlock("track",{default:"",kind:"subtitles",src:n,srclang:"es",label:"Spanish"},null,8,O))),256))],8,q),e.createElementVNode("div",{ref_key:"videoControl",ref:r,class:"video-controls video-controls-normal-screen"},[e.createVNode(j,{onJumpTo:ue,total:u.value,current:_.value},null,8,["total","current"]),e.createElementVNode("div",Q,[e.createElementVNode("div",A,[e.createElementVNode("div",{onClick:S,class:"control-btn"},[v.value?(e.openBlock(),e.createElementBlock("svg",X,W)):(e.openBlock(),e.createElementBlock("svg",G,J))]),e.createElementVNode("div",null,[e.createElementVNode("span",null,e.toDisplayString(Math.floor(_.value))+" / "+e.toDisplayString(Math.floor(u.value)),1)])]),e.createElementVNode("div",K,[e.createElementVNode("div",U,[e.withDirectives(e.createElementVNode("div",{onMouseenter:ae,onMouseleave:M,class:"rate-control",style:e.normalizeStyle({top:-d.value.length*33-20+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,(n,w)=>(e.openBlock(),e.createElementBlock("div",{onClick:ve=>ie(w),class:"rate-control-option",style:e.normalizeStyle(n.using?{backgroundColor:"rgb(43, 43, 43)"}:{})},e.toDisplayString(n.title),13,Y))),256))],36),[[e.vShow,B.value]]),e.createElementVNode("div",{onMouseenter:l[0]||(l[0]=n=>B.value=!0),onMouseleave:M,style:{cursor:"pointer"}},"清晰度",32)]),e.createElementVNode("div",Z,[e.withDirectives(e.createElementVNode("div",{onMouseenter:de,onMouseleave:L,class:"rate-control",style:e.normalizeStyle({top:-i.value.length*33-20+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(n,w)=>(e.openBlock(),e.createElementBlock("div",{onClick:ve=>ce(w),class:"rate-control-option",style:e.normalizeStyle(n.using?{backgroundColor:"rgb(43, 43, 43)"}:{})},e.toDisplayString(n.rate+" X"),13,ee))),256))],36),[[e.vShow,T.value]]),e.createElementVNode("div",{onMouseenter:l[1]||(l[1]=n=>T.value=!0),onMouseleave:L,style:{cursor:"pointer"}},"倍速",32)]),e.createElementVNode("div",{onClick:$,class:"control-btn"},te)])]),e.renderSlot(t.$slots,"control",{},void 0,!0)],512),e.createElementVNode("div",{ref_key:"videoHead",ref:a,class:"video-head"},[e.renderSlot(t.$slots,"head",{height:s.height},void 0,!0)],512),e.withDirectives(e.createElementVNode("div",{onClick:S,class:"Banner"},oe,512),[[e.vShow,v.value]]),e.withDirectives(e.createElementVNode("div",{onClick:S,class:"Banner"},le,512),[[e.vShow,f.value]])],544))}}),we="",re=x(se,[["__scopeId","data-v-bde65ef7"]]);p.NiceVideo=re,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
